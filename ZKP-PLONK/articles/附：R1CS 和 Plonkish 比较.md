# R1CS å’Œ Plonkish æ¯”è¾ƒ


## ç®—æœ¯ç”µè·¯ä¸ R1CS ç®—æœ¯åŒ–

ä¸€ä¸ªç®—æœ¯ç”µè·¯åŒ…å«è‹¥å¹²ä¸ªä¹˜æ³•é—¨ä¸åŠ æ³•é—¨ã€‚æ¯ä¸€ä¸ªé—¨éƒ½æœ‰ã€Œä¸¤ä¸ªè¾“å…¥ã€å¼•è„šå’Œä¸€ä¸ªã€Œè¾“å‡ºã€å¼•è„šï¼Œä»»ä½•ä¸€ä¸ªè¾“å‡ºå¼•è„šå¯ä»¥è¢«æ¥é©³åˆ°å¤šä¸ªé—¨çš„è¾“å…¥å¼•è„šä¸Šã€‚



### å½“ä¹˜æ³•é—¨<2

å…ˆçœ‹ä¸€ä¸ªéå¸¸ç®€å•çš„ç®—æœ¯ç”µè·¯ï¼š

![å›¾12:ç”µè·¯2-0](../images/PLONKç®—æœ¯åŒ–ã€Œ1ã€/å›¾12:ç”µè·¯2-0.png)


è¿™ä¸ªã€Œå›¾12:ç”µè·¯2-0ã€è¡¨ç¤ºäº†è¿™æ ·çš„ä¸€ä¸ªè®¡ç®—ï¼š

$$
(x_1 + 2) \cdot x_2 = out
$$

è¿™ä¸ªç”µè·¯åŒ…æ‹¬ä»¥ä¸‹ç»„æˆéƒ¨åˆ†ï¼š

- ä¸‰ä¸ªç®—æ•°é—¨ï¼Œå…¶ä¸­ #1 æ˜¯ä¹˜æ³•é—¨ï¼Œ#2 æ˜¯åŠ æ³•é—¨ï¼›
- ç”µè·¯ä¸­æœ‰ 3 ä¸ªå˜é‡ï¼Œå…¶ä¸­ä¸‰ä¸ªå˜é‡ä¸ºè¾“å…¥å˜é‡ $(x_1, x_2)$ ï¼Œä¸€ä¸ªè¾“å‡ºå˜é‡ $out$ï¼Œå…¶ä¸­è¿˜æœ‰ä¸€ä¸ªè¾“å…¥ä¸ºå¸¸æ•°ï¼Œå…¶å€¼ä¸º $2$ã€‚

R1CS æ˜¯é€šè¿‡ä¹˜æ³•é—¨ä¸ºä¸­å¿ƒï¼Œç”¨ä¸‰ä¸ªã€Œé€‰æ‹©å­ã€æ¥ã€Œé€‰æ‹©ã€ä¹˜æ³•é—¨çš„ã€Œå·¦è¾“å…¥ã€ã€ã€Œå³è¾“å…¥ã€ã€ã€Œè¾“å‡ºã€éƒ½åˆ†åˆ«è¿æ¥é‚£äº›å˜é‡ã€‚æ‰€è°“çš„ã€Œé€‰æ‹©å­ã€å¯ä»¥ç†è§£ä¸ºä¸€ç»„é¢„å…ˆç¡®å®šçš„ç³»æ•°ï¼Œå®ƒä»¬å‘Šè¯‰æˆ‘ä»¬å“ªäº›å˜é‡ä¼šè¿æ¥åˆ°ä¹˜æ³•é—¨çš„ã€Œå·¦è¾“å…¥ã€ã€ã€Œå³è¾“å…¥ã€å’Œã€Œè¾“å‡ºã€ã€‚

å°±ã€Œå›¾12:ç”µè·¯2-0ã€æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥çœ‹ä¹˜æ³•é—¨ #1ï¼Œå› ä¸ºå®ƒçš„å·¦è¾“å…¥æ˜¯$x_1+2$ï¼Œå³è¾“å…¥æ˜¯ $x_3$ï¼Œè€Œåœ¨ R1CS ä¸­ï¼ŒåŠ æ³•é—¨ #2 çš„è¾“å‡ºå¯ä»¥è¢«ç›´æ¥åŒ…å«åœ¨çº¿æ€§ç­‰å¼ï¼ˆ$x_1+2$ï¼‰ä¸­ï¼Œè€Œæ— éœ€å¼•å…¥é¢å¤–çš„ä¸­é—´å˜é‡åã€‚

![å›¾13:ç”µè·¯2-1
è¢«éšå»çš„ $m_1$](ZKP-PLONK/images/PLONKç®—æœ¯åŒ–ã€Œ1ã€/å›¾13:ç”µè·¯2-1.png)

æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿›è¡Œçº¿æ€§çº¦æŸçš„è½¬æ¢ï¼Œå…¶å®å°±æ˜¯å®šä¹‰å˜é‡å‘é‡å’Œé€‰æ‹©å­å‘é‡ã€‚

ä¸€ä¸ªç”µè·¯æœ‰ä¸¤ç§çŠ¶æ€ï¼šã€Œç©ºç™½æ€ã€å’Œã€Œè¿ç®—æ€ã€ã€‚å½“è¾“å…¥å˜é‡æ²¡æœ‰å…·ä½“å€¼çš„æ—¶å€™ï¼Œç”µè·¯å¤„äºã€Œç©ºç™½æ€ã€ï¼Œè¿™æ—¶æˆ‘ä»¬åªèƒ½æè¿°ç”µè·¯å¼•çº¿ä¹‹é—´çš„å…³ç³»ï¼Œå³ç”µè·¯çš„ç»“æ„æ‹“æ‰‘ã€‚

**é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ¥è¡¨ç¤ºç”µè·¯çš„ã€Œç©ºç™½æ€ã€å‘¢ï¼Ÿå°±æ˜¯é€šè¿‡å®šä¹‰å˜é‡å‘é‡ï¼Œ**ç¼–ç å„ä¸ªé—¨çš„ä½ç½®ï¼Œå’Œä»–ä»¬ä¹‹é—´å¼•çº¿è¿æ¥å…³ç³»ã€‚

åœ¨ã€Œå›¾12:ç”µè·¯2-0ã€è¿™ä¸ªç”µè·¯ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡å‘é‡ $\vec{z}=[1,x_1,x_2,out]$

<aside>
ğŸ’¡ æ³¨ï¼š
1. åœ¨å®šä¹‰å˜é‡å‘é‡è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬æ²¡æœ‰èµ‹å€¼ç»™è¿™äº›å˜é‡ï¼Œå®ƒä»¬åªæ˜¯å ä½ç¬¦ã€‚
2. å‘é‡ $z$ ä¸­çš„å¸¸æ•° 1 ä½œä¸ºç¬¬ä¸€ä¸ªå…ƒç´ ä»¥æ”¯æŒå¸¸æ•°çš„é€‰æ‹©å­
</aside>

ä¹‹åï¼Œæˆ‘ä»¬æ¥è¡¨ç¤ºç”µè·¯çš„ã€Œè¿ç®—æ€ã€ï¼Œæˆ‘ä»¬å¯ä»¥å°† $(x_1 + 2) \cdot x_2 = out$ è¡¨ç¤ºä¸º $z$ çš„çº¿æ€§ç»„åˆï¼Œä¾¿äºéªŒè¯å’Œè®¡ç®—ï¼š

$$
\begin{array}{l}
(2 \cdot 1 + 1 \cdot x_1+ 0 \cdot x_2+ 0 \cdot out)\cdot (0 \cdot 1 + 0 \cdot x_1 +1 \cdot x_2 + 0 \cdot out)
\\ = (0 \cdot 1 + 0 \cdot x_1+ 0 \cdot x_2+ 1 \cdot out)
\end{array}
$$
é‚£ä¹ˆç”µè·¯çš„å·¦è¾“å…¥å‘é‡ $U$ å¯¹åº”çš„é€‰æ‹©å­å‘é‡ä¸º $U =[2,1,0,0]$ï¼Œå…¶ä¸­ï¼š

- `2`Â å¯¹åº”å¸¸æ•°é¡¹ $2$
- `1`Â å¯¹åº” $x_1$

å…¶æ¬¡æ˜¯ç”µè·¯çš„å³è¾“å…¥å‘é‡ $V$ å¯¹åº”çš„é€‰æ‹©å­å‘é‡ $V=[0,0,1,0]$ï¼Œ å…¶ä¸­ï¼š

- `1`Â å¯¹åº” $x_2$

ç”µè·¯çš„è¾“å‡ºå‘é‡  $W$ å¯¹åº”çš„é€‰æ‹©å­å‘é‡ä¸º $W=[0,0,0,1]$ï¼Œ å…¶ä¸­ï¼š

- `1`Â å¯¹åº” $out$

æœ‰äº†ä¸‰ä¸ªå‘é‡ $[U,V,W]$ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªã€Œå†…ç§¯ã€ç­‰å¼æ¥è¡¨ç¤ºè¾“å‡º $out$ çš„çº¦æŸï¼š

$$
(Uâ‹…\vec{z})â‹…(Vâ‹…\vec{z})=Wâ‹…\vec{z}
$$
å…·ä½“åœ°ï¼Œå†…ç§¯è®¡ç®—å¦‚ä¸‹ï¼š

$$
\begin{array}{l}
(ğ‘ˆâ‹…ğ‘§)=2â‹…1+1â‹…ğ‘¥_1+0â‹…ğ‘¥_2+0â‹…ğ‘œğ‘¢ğ‘¡=2+ğ‘¥_1 \\

(ğ‘‰â‹…ğ‘§)=0â‹…1+0â‹…ğ‘¥_1+1â‹…ğ‘¥_2+0â‹…ğ‘œğ‘¢ğ‘¡=ğ‘¥_2 \\

(ğ‘Šâ‹…ğ‘§)=0â‹…1+0â‹…ğ‘¥_1+0â‹…ğ‘¥_2+1â‹…ğ‘œğ‘¢ğ‘¡=ğ‘œğ‘¢ğ‘¡
\end{array}
$$
è¿™ä¸ªå†…ç§¯ç­‰å¼åŒ–ç®€ä¹‹åæ­£å¥½å¯ä»¥å¾—åˆ°ï¼š

$$
(2+ğ‘¥_1)â‹…ğ‘¥_2=ğ‘œğ‘¢ğ‘¡
$$
å®Œç¾ï¼

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥èµ‹å€¼éªŒè¯ä¸€ä¸‹ã€‚ä»¤ $x_1 =3$ï¼Œ$x_2=4$ï¼Œä»£å…¥å†…ç§¯ç­‰å¼ä¸­ï¼Œé‚£ä¹ˆ $out=20$ã€‚æŠŠè¿™å‡ ä¸ªå˜é‡æ¢æˆèµ‹å€¼å‘é‡ $[1,x_1,x_2,out] = [1,3,4,20]$ï¼Œé‚£ä¹ˆç”µè·¯çš„è¿ç®—å¯ä»¥é€šè¿‡ã€Œå†…ç§¯ã€ç­‰å¼æ¥éªŒè¯ï¼š

$$
(U\cdot[1,3,4,70])\cdot(V\cdot[1,3,4,70])=W\cdot[1,3,4,70]
$$
å…·ä½“çš„è®¡ç®—ï¼š

$$
\begin{array}{l}
([2,1,0,0]\cdot [1,3,4,20])\cdot([0,0,1,0]\ cdot[1,3,4,20]) \\
= (2+3)\cdot 4\\
= 20
\end{array}
$$

$$
\begin{array}{c}
[0,0,0,1]\cdot [1,3,4,20]=20
\end{array}
$$

ä¸¤è¾¹ç›¸ç­‰ï¼Œæ»¡è¶³ 

$$
(U\cdot(1,3,4,20))\cdot(V\cdot(1,3,4,20))=W\cdot(1,3,4,20)
$$
æˆ‘ä»¬éªŒè¯äº†è¿™ä¸ªç”µè·¯ç»™å®šçš„è¾“å…¥è¾“å‡ºå€¼ï¼Œä¹Ÿå°±æ˜¯ç”µè·¯çš„è¿ç®—æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚

ä½†æ˜¯å¦‚æœèµ‹å€¼å‘é‡æœ‰é”™è¯¯ï¼Œä¾‹å¦‚èµ‹å€¼å˜é‡æ˜¯$\vec{z}= [1,3,4,70]$ ï¼Œåˆ™ä¸æ»¡è¶³ã€Œå†…ç§¯ç­‰å¼ã€ï¼š

$$
(U\cdot(1,3,4,70))\cdot(U\cdot(1,3,4,70))\neq W\cdot(1,3,4,70)
$$
å·¦è¾¹è¾“å…¥çš„è¿ç®—ç»“æœä¸º $20$ï¼Œå³è¾¹è¿ç®—ç»“æœä¸º $70$ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥éªŒè¯å…¶å®ƒåˆæ³•ï¼ˆæ»¡è¶³ç”µè·¯çº¦æŸï¼‰çš„èµ‹å€¼ã€‚

å¹¶ä¸æ˜¯ä»»ä½•ä¸€ä¸ªç”µè·¯éƒ½å­˜åœ¨èµ‹å€¼å‘é‡ã€‚å‡¡æ˜¯å­˜åœ¨åˆæ³•çš„èµ‹å€¼å‘é‡çš„ç”µè·¯ï¼Œè¢«ç§°ä¸ºå¯è¢«æ»¡è¶³çš„ç”µè·¯ã€‚åˆ¤æ–­ä¸€ä¸ªç”µè·¯æ˜¯å¦å¯è¢«æ»¡è¶³ï¼Œæ˜¯ä¸€ä¸ª NP-Complete é—®é¢˜ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª NP å›°éš¾é—®é¢˜ã€‚

å€¼å¾—ä¸€æçš„äº‹ï¼Œæœ‰ä¸€ç±»ã€Œå¸¸æ•°ä¹˜æ³•é—¨ã€ï¼Œåªæœ‰ä¸€è¾¹çš„è¾“å…¥ä¸ºå˜é‡ï¼Œå¦ä¸€è¾¹ä¸ºå¸¸æ•°ã€‚è¿™ä¸€ç±»ã€Œå¸¸æ•°ä¹˜æ³•é—¨ã€ä¹ŸæŠŠå®ƒä»¬çœ‹ä½œä¸ºç‰¹æ®Šçš„ã€ŒåŠ æ³•é—¨ã€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå·¦è¾¹ç”µè·¯å³ä¸‹çš„ä¹˜æ³•é—¨ç­‰ä»·äºå³è¾¹ç”µè·¯çš„å³ä¸‹åŠ æ³•é—¨ã€‚

![å›¾14:ç”µè·¯3
ä» $(x_1+x_2)\cdot (2\cdot x_3)=out$ â‡’$(x_1+x_2)\cdot(x_3+x_3)=out$](ZKP-PLONK/images/PLONKç®—æœ¯åŒ–ã€Œ1ã€/å›¾14:ç”µè·¯3.png)

ä¸Šé¢è¯´çš„æ˜¯ç”µè·¯æœ¬èº«æ˜¯ä¸€ä¸ªä¹˜æ³•é—¨æˆ–è€…å¯ä»¥è½¬æ¢æˆä¸€ä¸ªä¹˜æ³•é—¨æ¥å¤„ç†çš„æƒ…å†µï¼Œå¯å¦‚æœä¸€ä¸ªç”µè·¯å«æœ‰ä¸¤ä¸ªä»¥ä¸Šçš„ä¹˜æ³•é—¨ï¼Œæˆ‘ä»¬å°±ä¸èƒ½ç”¨  $ğ‘ˆ,ğ‘‰,ğ‘Š$ ä¸‰ä¸ªå‘é‡ä¹‹é—´çš„å†…ç§¯å…³ç³»æ¥è¡¨ç¤ºè¿ç®—ï¼Œè€Œéœ€è¦æ„é€ ã€Œä¸‰ä¸ªçŸ©é˜µã€çš„è¿ç®—å…³ç³»ã€‚

---



### å½“ä¹˜æ³•é—¨ >2

æ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºç”µè·¯ï¼Œæœ‰ä¸¤ä¸ªä¹˜æ³•é—¨ï¼Œä»–ä»¬çš„å·¦å³è¾“å…¥éƒ½æ¶‰åŠåˆ°å˜é‡ã€‚

![å›¾15:ç”µè·¯4.png](ZKP-PLONK/images/PLONKç®—æœ¯åŒ–ã€Œ1ã€/å›¾15:ç”µè·¯4.png)

è¿™ä¸ªç”µè·¯è¡¨ç¤ºäº†è¿™æ ·çš„ä¸€ä¸ªè®¡ç®—ï¼š

$$
(x_1 + x2) \cdot (x3 \cdot x4) = out
$$
æˆ‘ä»¬ä»¥**ä¹˜æ³•é—¨**ä¸ºåŸºå‡†ï¼Œå¯¹ç”µè·¯è¿›è¡Œç¼–ç ã€‚ç¬¬ä¸€æ­¥å°†ç”µè·¯ä¸­çš„ä¹˜æ³•é—¨ä¾æ¬¡ç¼–å·ï¼ˆæ— æ‰€è°“ç¼–ç é¡ºåºï¼Œåªè¦å‰åä¿æŒä¸€è‡´ï¼‰ã€‚å›¾ä¸­çš„ä¸¤ä¸ªä¹˜æ³•é—¨ç¼–ç ä¸º `#1` ä¸ `#3`ã€‚

ç„¶åæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸€ä¸ªä¹˜æ³•é—¨çš„ä¸­é—´å€¼å¼•çº¿ä¹Ÿç»™å‡ºå˜é‡åï¼šæ¯”å¦‚å››ä¸ªè¾“å…¥å˜é‡è¢«è®°ä¸º $x_1, x_2, x_3, x_4$ï¼Œå…¶ä¸­ $x_6$ ä¸ºä¹˜æ³•é—¨ #3 çš„è¾“å‡ºï¼ŒåŒæ—¶ä½œä¸ºä¹˜æ³•é—¨ #1 çš„å³è¾“å…¥ã€‚è€Œ $out$ ä¸ºä¹˜æ³•é—¨ #1 çš„è¾“å‡ºã€‚å…¶ä¸­ $x_5$ æ˜¯åŠ æ³•é—¨ #2 çš„è¾“å‡ºï¼Œåœ¨ R1CS ä¸­ï¼Œæˆ‘ä»¬å°†å…¶éšåŒ¿æ‰äº†ï¼Œ$x_5$ åªéœ€è¦ç”¨ $x_1+x_2$ å³å¯å¾—å‡ºã€‚

æ ¹æ®ä¸Šé¢çš„å…³ç³»ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªå…³äºè¯¥ç”µè·¯ã€Œç©ºç™½æ€ã€å˜é‡åçš„å‘é‡ï¼š

$$
\vec{zâ€™}=[1, x_1, x_2, x_3, x_4, x_6, out]
$$
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ„é€ ã€Œä¸‰ä¸ªçŸ©é˜µã€çš„è¿ç®—å…³ç³»ã€‚

$U, V, W \in \mathbb{F}^{n\times m}$ï¼ˆ$n$ ä»£è¡¨çš„æ˜¯ä¹˜æ³•é—¨çš„æ•°é‡ï¼Œ$m$ ä»£è¡¨çš„æ˜¯å˜é‡çš„æ•°é‡ï¼‰

æ¯ä¸€ä¸ªçŸ©é˜µçš„ç¬¬ $i$ è¡Œã€Œé€‰æ‹©ã€äº†ç¬¬ $i$ ä¸ªä¹˜æ³•é—¨çš„è¾“å…¥è¾“å‡ºå˜é‡ã€‚æ¯”å¦‚æˆ‘ä»¬å®šä¹‰ç”µè·¯çš„å·¦è¾“å…¥çŸ©é˜µ  $U$ ï¼š

$$
\begin{array}{|c|c|c|c|c|c|c|c|}
\hline
\texttt{i} &1 &x_1 & x_2 & x_3 & x_4 & x_6 & out \\
\hline
\texttt{1}&0 &1 & 1 & 0 & 0 & 0 & 0 \\
\hline
\texttt{2}&0 & 0 & 0 & 1 & 0 & 0 & 0 \\
\hline
\end{array}
$$
å…¶ä¸­ä¹˜æ³•é—¨ #1 çš„å·¦è¾“å…¥ä¸º $(x_1+x_2)$ï¼Œ ä¹˜æ³•é—¨ #3 çš„å·¦è¾“å…¥ä¸º $x_3$ã€‚

å³è¾“å…¥çŸ©é˜µ $V$ å®šä¹‰ä¸ºï¼š

$$
\begin{array}{|c|c|c|c|c|c|c|c|}
\hline
\texttt{i}& 1 & x_1 & x_2 & x_3 & x_4 & x_6 & out \\
\hline
\texttt{1}& 0 & 0 & 0 & 0 & 0 & 1 & 0 \\
\hline
\texttt{2}& 0 &0 & 0 & 0 & 1 & 0 & 0  \\
\hline
\end{array}
$$
å…¶ä¸­ä¹˜æ³•é—¨ #1 çš„å³è¾“å…¥ä¸º $x_6$ï¼Œä¹˜æ³•é—¨ #3 çš„å³è¾“å…¥ä¸º $x_4$ã€‚

æœ€åå®šä¹‰è¾“å‡ºçŸ©é˜µ $W$ï¼š

$$
\begin{array}{|c|c|c|c|c|c|c|c|}
\hline
 \texttt{i} &1& x_1 & x_2 & x_3 & x_4 & x_6 & out\\
\hline
 \texttt{1} & 0 & 0 & 0 & 0 & 0 & 0 & 1\\
\hline
 \texttt{2} & 0 & 0 & 0 & 0 & 0 & 1 & 0\\
\hline
\end{array}
$$
æœ‰äº†å˜é‡å‘é‡ $\vec{zâ€™}$ï¼Œä»¥åŠé€‰æ‹©å­å‘é‡ $U,V,W$ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥è½»æ˜“åœ°æ£€éªŒä¸‹é¢çš„ç­‰å¼ï¼š

$$
(U \cdot \vec{zâ€™}) \circ (V \cdot \vec{zâ€™}) = (W \cdot\vec{zâ€™})
$$
![è®¡ç®—è¿‡ç¨‹2-1.png](ZKP-PLONK/images/PLONKç®—æœ¯åŒ–ã€Œ1ã€/è®¡ç®—è¿‡ç¨‹2-1.png)

![è®¡ç®—è¿‡ç¨‹2-2](ZKP-PLONK/images/PLONKç®—æœ¯åŒ–ã€Œ1ã€/è®¡ç®—è¿‡ç¨‹2-2.png)

![è®¡ç®—è¿‡ç¨‹2-3](ZKP-PLONK/images/PLONKç®—æœ¯åŒ–ã€Œ1ã€/è®¡ç®—è¿‡ç¨‹2-3.png)

å…¶ä¸­ç¬¦å· $\circ$ ä¸º Hadamard Productï¼Œè¡¨ç¤ºã€ŒæŒ‰ä½ä¹˜æ³•ã€ã€‚å±•å¼€ä¸Šé¢çš„æŒ‰ä½ä¹˜æ³•ç­‰å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™ä¸ªç”µè·¯çš„è¿ç®—è¿‡ç¨‹ï¼š

$$
\left[
\begin{array}{c}
x_1 + x_2 \\
x_3 \\
\end{array}
\right]
\circ
\left[
\begin{array}{c}
x_6 \\
x_4 \\
\end{array}
\right]=
\left[
\begin{array}{c}
out \\
x_6 \\
\end{array}
\right]
$$
æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸¤ä¸ªç­‰å¼ï¼Œç¬¦åˆæœ€åˆçš„ç”µè·¯çº¦æŸå…³ç³»ï¼š

$$
(x_1+x_2)\cdot x_6=out

x_3\cdot x_4=x_6
$$
è¡¨æ˜ç”µè·¯çš„è¾“å…¥è¾“å‡ºå€¼æ— è¯¯ã€‚



## ä¼˜ç¼ºç‚¹

ç”±äº R1CS ç¼–ç ä»¥ä¹˜æ³•é—¨ä¸ºä¸­å¿ƒï¼Œäºæ˜¯ç”µè·¯ä¸­çš„åŠ æ³•é—¨å¹¶ä¸ä¼šå¢åŠ  $U, V, W$ çŸ©é˜µçš„è¡Œæ•°ï¼Œå› è€Œå¯¹ Prover çš„æ€§èƒ½å½±å“ä¸å¤§ã€‚R1CS ç”µè·¯çš„ç¼–ç æ¸…æ™°ç®€å•ï¼Œåˆ©äºåœ¨å…¶ä¸Šæ„é€ å„ç§ SNARK æ–¹æ¡ˆã€‚

åœ¨ 2019 å¹´ Plonk è®ºæ–‡ä¸­çš„ç¼–ç æ–¹æ¡ˆåŒæ—¶éœ€è¦ç¼–ç åŠ æ³•é—¨ä¸ä¹˜æ³•é—¨ï¼Œçœ‹èµ·æ¥å› æ­¤ä¼šå¢åŠ çº¦æŸçš„æ•°é‡ï¼Œé™ä½ Proving æ€§èƒ½ã€‚ä½† Plonk å›¢é˜Ÿéšåé™†ç»­å¼•å…¥äº†é™¤ä¹˜æ³•ä¸åŠ æ³•å¤–çš„è¿ç®—é—¨ï¼Œæ¯”å¦‚å®ç°èŒƒå›´æ£€æŸ¥çš„é—¨ï¼Œå®ç°å¼‚æˆ–è¿ç®—çš„é—¨ç­‰ç­‰ã€‚ä¸ä»…å¦‚æ­¤ï¼ŒPlonk æ”¯æŒä»»ä½•å…¶è¾“å…¥è¾“å‡ºæ»¡è¶³å¤šé¡¹å¼å…³ç³»çš„é—¨ï¼Œå³ Custom Gateï¼Œè¿˜æœ‰é€‚ç”¨äºå®ç° RAM çš„çŠ¶æ€è½¬æ¢é—¨ç­‰ï¼Œéšç€æŸ¥è¡¨é—¨çš„æå‡ºï¼ŒPlonk æ–¹æ¡ˆé€æ­¥æˆä¸ºè®¸å¤šåº”ç”¨çš„é¦–é€‰æ–¹æ¡ˆï¼Œå…¶ç¼–ç æ–¹å¼ä¹Ÿæœ‰äº†ä¸€ä¸ªä¸“é—¨çš„åè¯ï¼šPlonkishã€‚

R1CS çš„ $(U,V,W)$ è¡¨æ ¼çš„å®½åº¦ä¸å¼•çº¿çš„æ•°é‡æœ‰å…³ï¼Œè¡Œæ•°è·Ÿä¹˜æ³•é—¨æ•°é‡æœ‰å…³ã€‚è¿™ä¸ªæ„é€ ç›¸å½“äºæŠŠç®—æœ¯ç”µè·¯çœ‹æˆæ˜¯ä»…æœ‰ä¹˜æ³•é—¨æ„æˆï¼Œä½†æ¯ä¸ªé—¨æœ‰å¤šä¸ªè¾“å…¥å¼•è„šï¼ˆæœ€å¤šä¸ºæ‰€æœ‰å¼•çº¿çš„æ•°é‡ï¼‰ã€‚è€Œ Plonkish åˆ™æ˜¯åŒç­‰å¯¹å¾…åŠ æ³•é—¨ä¸ä¹˜æ³•é—¨ï¼Œå¹¶ä¸”å› ä¸ºè¾“å…¥å¼•è„šåªæœ‰ä¸¤ä¸ªï¼Œ æ‰€ä»¥ $W$ è¡¨æ ¼çš„å®½åº¦å›ºå®šï¼Œä»…æœ‰ä¸‰åˆ—ï¼ˆå¦‚æœè¦æ”¯æŒé«˜çº§çš„è®¡ç®—é—¨ï¼Œè¡¨æ ¼å¯ä»¥æ‰©å±•åˆ°æ›´å¤šåˆ—ï¼‰ã€‚è¿™ä¸€ç‰¹æ€§æ˜¯ Plonk å¯ä»¥åˆ©ç”¨ Permutation Argument å®ç°æ‹·è´çº¦æŸçš„å‰æã€‚

> ..., and thus our linear contraints are just wiring constraints that can be reduced to a permutation check.
> 

æŒ‰ç…§ Plonk è®ºæ–‡çš„ç»Ÿè®¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç®—æœ¯ç”µè·¯ä¸­åŠ æ³•é—¨çš„æ•°é‡æ˜¯ä¹˜æ³•é—¨çš„ä¸¤å€ã€‚å¦‚æœè¿™æ ·çœ‹æ¥ï¼Œ $W$ è¡¨æ ¼çš„é•¿åº¦ä¼šä¸‰å€äº R1CS çš„çŸ©é˜µã€‚ä½†è¿™ä¸ªè®©æ­¥ä¼šå¸¦æ¥æ›´å¤šçš„ç®—æœ¯åŒ–çµæ´»åº¦ã€‚



# å‚è€ƒæ–‡çŒ®

- [BG12] Bayer, Stephanie, and Jens Groth. "Efficient zero-knowledge argument for correctness of a shuffle." *Annual International Conference on the Theory and Applications of Cryptographic Techniques*. Springer, Berlin, Heidelberg, 2012.
- [GWC19] Ariel Gabizon, Zachary J. Williamson, and Oana Ciobotaru. "Plonk: Permutations over lagrange-bases for oecumenical noninteractive arguments of knowledge." *Cryptology ePrint Archive* (2019).